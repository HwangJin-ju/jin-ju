<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>
        <form>
            사용자 아이디<input type="text" name="uid" id="uid" value="user1"><br>
            사용자이름<input type="text" name="uname" id="uname" value="이동혁"><br>
            이메일<input type="text" name="email" id="email" value="dong@email.com"><br>
            전화번호<input type="text" name="phone" id="phone" value="010-2000-0606"><br>
            생년월일<input type="date" id="date" value="2000-06-06"><br>
            <input type="submit" value="등록" id="subBtn">
            <input type="button" value="선택삭제" id="delBtn">
        </form>
    </div>
    <div>
        <table border="1">
            <thead>
                <tr>
                    <th>선택</th>
                    <th>순번</th> 
                    <th>아이디</th>
                    <th>이름</th>
                    <th>이메일</th>
                    <th>전화번호</th>
                    <th>생년월일</th>
                </tr>
            </thead>
            <tbody id="bd">

            </tbody>

        </table>
    </div>
    <script>
        // document.addEventListener('DOMContentLoaded', init)
        // init()



        let dataList = []
        let subBtn = document.getElementById('subBtn')

        subBtn.addEventListener('click', function (e) {
            e.preventDefault();

            let userId = document.getElementById('uid').value
            let userName = document.getElementById('uname').value
            let email = document.getElementById('email').value
            let phoneNumber = document.getElementById('phone').value
            let birthday = document.getElementById('date').value
            let cnt = 0
      
            //let order = 1
            // let trAry = document.querySelectorAll('tbody>tr')
            // trAry.forEach(function(val, idx, ary){
            //     if(idx == 0) {
            //         order = 2   
            //     } else {
            //         order = idx+2
            //     }
            // })
            // console.log(`배열의 길이 ${trAry.length}`)
            // console.log(`순번 ${order}`
            
            let objUser = { // {userId: userId, userName: userName, email: email, phoneNumber: phoneNumber}
                // order: dataList.length+1,
                userId: userId,
                userName: userName,
                email: email,
                phoneNumber: phoneNumber,
                birthday: birthday
            }

            addList(objUser)
            console.log(dataList)
            console.log(dataList.length)

            let body = document.getElementById('bd')

            bd.appendChild(makeTr(objUser))
        })

        let delBtn = document.getElementById('delBtn')

        delBtn.addEventListener('click', function (e) {
            e.preventDefault();
            let allTr = document.querySelectorAll('tbody>tr')
            allTr.forEach(function (tr) {
                if (tr.firstElementChild.firstElementChild.checked == true) {
                    tr.remove();
                }

            })
        })

        function makeTr(obj) {

            let tr = document.createElement('tr') // <tr></tr>  
            let td = document.createElement('td') // <td></td>
            let chkBtn = document.createElement('input') // <input>
            chkBtn.setAttribute('type', 'checkbox') // <input type=checkbox>
            td.appendChild(chkBtn) // <td><input type=checkbox</td>
         


            for (let field in obj) {
                td = document.createElement('td')
                td.innerHTML = obj[field]
                tr.appendChild(td);
            }

            return tr
        }

        function addList(obj) {          
            dataList.push(obj)
            return dataList
        }
    </script>
</body>

</html>